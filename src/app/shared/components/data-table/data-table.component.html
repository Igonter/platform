<table>
  <thead>
  <tr *ngFor="let row of tableHeader">
    <th *ngFor="let column of row.columns"
        [attr.colspan]="column.colspan"
        [attr.rowspan]="column.rowspan"
        class="{{column.property}}">
      {{column.label | translate}}
    </th>
  </tr>
  </thead>

  <tbody>
  <tr *ngFor="let item of data">
    <ng-container *ngFor="let row of tableHeader">
      <ng-container *ngFor="let column of row.columns">
        <ng-container *ngIf="column.property || column.property === ''" >
          <td [ngSwitch]="column.property" class="{{column.property}}">
            <!-- Strategy special data -->
            <ng-container *ngSwitchCase="'age'">{{item.getAgeWeeks()}}</ng-container>

            <ng-container *ngSwitchCase="'name'">
              <a class="detail-link" [routerLink]="[getItemLink(item)]">{{item.name}}</a>
              <app-manage *ngIf="item.isActive()" [data]="item"></app-manage>
            </ng-container>

            <ng-container *ngSwitchCase="'strategy.name'">
              <a class="detail-link" [routerLink]="[getItemLink(item.strategy)]">{{item.strategy.name}}</a>
              <app-manage *ngIf="item.isActive()" [data]="item"></app-manage>
            </ng-container>

            <div class="strategy-account"
                 *ngSwitchCase="'investmentInfo'">
              <div class="strategy-account-intervalPnL"><span>Прибыль:</span><span>{{item.intervalPnL | currency:'':'':'1.2-2'}}</span></div>
              <div class="strategy-account-target"><span>Цель:</span><span>{{item.getTargetAmount() | currency:'':'':'1.2-2'}}</span></div>
              <div class="strategy-account-equity"><span>Средства:</span><span>{{item.equity | currency:'':'':'1.2-2'}}</span></div>
              <div class="strategy-account-protection"><span>Защита:</span><span>{{item.getProtectionAmount() | currency:'':'':'1.2-2'}}</span></div>
            </div>

            <ng-container *ngSwitchCase="'manage'">
              <app-manage [data]="item"></app-manage>
            </ng-container>

            <!-- Investment special data-->
            <ng-container *ngSwitchCase="'investmentDetails'">
              <a [routerLink]="['/investments/details', item.id]"><i class="icon-doc"></i></a>
            </ng-container>

            <ng-container *ngSwitchCase="'type'">
              {{item.getType()}}
            </ng-container>

            <ng-container *ngSwitchCase="'entry'">
              {{item.getEntry()}}
            </ng-container>

            <ng-container *ngSwitchCase="'yieldChart'">
              <app-chart-yield-table [account]="item"></app-chart-yield-table>
            </ng-container>

            <ng-container *ngSwitchCase="''">
              ???
            </ng-container>

            <!-- Just show property value -->
            <ng-container *ngSwitchDefault>
              <span [class.positive]="getPropertyValue(item, column.property) > 0 && isColored(column.property)"
                    [class.negative]="getPropertyValue(item, column.property) < 0 && isColored(column.property)">
                {{getPropertyValue(item, column.property) | dynamic:column.pipe.pipe:column.pipe.args}}
              </span>
            </ng-container>
          </td>
        </ng-container>
      </ng-container>
    </ng-container>
  </tr>

  <tr *ngIf="totalFields && data">
    <ng-container *ngFor="let row of tableHeader">
      <ng-container *ngFor="let column of row.columns">
        <ng-container *ngIf="isTotal(column.property)">
          <td class="total-cell"
              [class.positive]="getTotal(column.property) > 0 && isColored(column.property)"
              [class.negative]="getTotal(column.property) < 0 && isColored(column.property)">
            {{getTotal(column.property) | number:'1.0-2'}}
          </td>
        </ng-container>
        <ng-container *ngIf="!isTotal(column.property)">
          <td></td>
        </ng-container>
      </ng-container>
    </ng-container>
  </tr>
  </tbody>
</table>

<div *ngIf="paginator" class="pagination-container">
  <app-data-table-paginator [paginator]="paginator" (paginationChanged)="paginatorChanged()"></app-data-table-paginator>
</div>
